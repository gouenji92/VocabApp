<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Dashboard - VocabApp</title>
  <link rel="stylesheet" href="/static/base.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f0f2f5;
      min-height: 100vh;
    }

    /* Header giá»‘ng Feed */
    .top-header {
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 12px 20px;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .logo {
      font-size: 1.8em;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
    }

    .nav-icons {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .nav-btn {
      padding: 8px 16px;
      background: none;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.95em;
      color: #333;
      text-decoration: none;
      transition: all 0.3s;
    }

    .nav-btn:hover {
      background: #f0f2f5;
    }

    .nav-btn.active {
      color: #667eea;
      font-weight: 600;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1em;
    }

    main {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px 40px;
    }

    .page-header {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .page-header h1 {
      font-size: 2em;
      color: #050505;
      margin-bottom: 8px;
    }

    .page-header p {
      color: #65676b;
      font-size: 1em;
    }

    .layout-grid { 
      display: grid; 
      grid-template-columns: 1fr 340px; 
      gap: 20px; 
      align-items: start; 
    }

    @media (max-width: 1000px){ 
      .layout-grid { 
        grid-template-columns: 1fr; 
      } 
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .quick-actions { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
      gap: 16px; 
      margin-bottom: 20px; 
    }

    .quick-action { 
      display: flex; 
      gap: 16px; 
      align-items: center; 
      text-decoration: none;
      padding: 20px;
    }

    .quick-action:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .quick-action-icon { 
      font-size: 2.5rem; 
    }

    .quick-action h3 { 
      margin: 0 0 4px 0; 
      font-size: 1.1rem;
      color: #050505;
    }

    .quick-action p { 
      margin: 0; 
      font-size: 0.9rem;
      color: #65676b;
    }

    .stats-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
      gap: 16px;
      margin-bottom: 20px;
    }

    .stat-card { 
      position: relative; 
      overflow: hidden;
      text-align: center;
    }

    .stat-icon { 
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .stat-value { 
      font-size: 2.5rem; 
      font-weight: 800; 
      color: #050505;
      margin: 8px 0;
    }

    .stat-label { 
      font-size: 0.85rem; 
      letter-spacing: 0.5px; 
      text-transform: uppercase; 
      font-weight: 600; 
      color: #65676b;
    }

    .section-title {
      font-size: 1.3em;
      font-weight: 700;
      color: #050505;
      margin-bottom: 16px;
    }

    .recent-sets-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); 
      gap: 16px; 
    }

    .set-item h3 { 
      margin: 0 0 8px 0; 
      font-size: 1.1rem;
      color: #050505;
    }

    .set-item p {
      color: #65676b;
      margin: 8px 0;
      font-size: 0.9em;
    }

    .actions { 
      display: flex; 
      gap: 8px; 
      flex-wrap: wrap; 
      margin-top: 12px; 
    }

    .btn-ghost {
      padding: 8px 16px;
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s;
      font-size: 0.9em;
    }

    .btn-ghost:hover {
      background: #667eea;
      color: white;
    }

    .btn-primary {
      padding: 8px 16px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s;
      font-size: 0.9em;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #65676b;
    }

    .empty-state a { 
      color: #667eea;
      font-weight: 600;
      text-decoration: none;
    }

    aside .card { 
      position: sticky; 
      top: 76px;
    }

    @media (max-width: 768px) {
      .nav-icons {
        gap: 8px;
      }

      main {
        padding: 0 16px 40px;
      }

      .page-header h1 {
        font-size: 1.5em;
      }

      .quick-actions {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Header giá»‘ng Feed -->
  <div class="top-header">
    <div class="header-content">
      <a href="/" class="logo">VocabApp</a>
      <div class="nav-icons">
        <a href="/feed" class="nav-btn">ğŸ  Feed</a>
        <a href="/sets" class="nav-btn">ğŸ“š Bá»™ tá»« cá»§a tÃ´i</a>
        <a href="/dashboard" class="nav-btn active">ğŸ“Š Thá»‘ng kÃª</a>
  {% if user and user.avatar %}
  <img src="{{ user.avatar }}" class="user-avatar" title="{{ user.display_name or username }}" style="object-fit:cover;" />
  {% else %}
  <div class="user-avatar" title="{{ user.display_name if user else username }}">{{ username[0].upper() }}</div>
  {% endif %}
  <a href="/profile" class="nav-btn">ğŸ‘¤ TÃ i khoáº£n</a>
        <a href="/logout" class="nav-btn" style="color:#ef4444;">ÄÄƒng xuáº¥t</a>
      </div>
    </div>
  </div>

  <main>
    <div class="page-header">
      <h1>ğŸ“Š Dashboard</h1>
      <p>Tá»•ng quan há»c táº­p hÃ´m nay</p>
    </div>
    <div class="layout-grid">
      <section>
        <div class="quick-actions">
          <a href="/" class="card quick-action" aria-label="Táº£i lÃªn bá»™ tá»« má»›i">
            <div class="quick-action-icon">ğŸ“¤</div>
            <div>
              <h3>Táº£i lÃªn File</h3>
              <p class="muted">ThÃªm bá»™ tá»« má»›i</p>
            </div>
          </a>
          <a href="/sets" class="card quick-action" aria-label="Xem táº¥t cáº£ bá»™ tá»«">
            <div class="quick-action-icon">ğŸ“–</div>
            <div>
              <h3>Quáº£n lÃ½ Bá»™ Tá»«</h3>
              <p class="muted">Xem & chá»‰nh sá»­a</p>
            </div>
          </a>
          {% if recent_sets %}
          <a href="/study/{{ recent_sets[0].id }}?mode=select" class="card quick-action" aria-label="Há»c ngay">
            <div class="quick-action-icon">ğŸ¯</div>
            <div>
              <h3>Há»c Nhanh</h3>
              <p class="muted">Tiáº¿p tá»¥c bá»™ gáº§n nháº¥t</p>
            </div>
          </a>
          {% else %}
          <a href="#" class="card quick-action" aria-label="Há»c ngay" style="pointer-events:none;opacity:.4;">
            <div class="quick-action-icon">ğŸ¯</div>
            <div>
              <h3>Há»c Nhanh</h3>
              <p class="muted">Tiáº¿p tá»¥c bá»™ gáº§n nháº¥t</p>
            </div>
          </a>
          {% endif %}
        </div>
        <div class="stats-grid" style="margin-bottom:2rem;">
          <div class="card stat-card" aria-label="Tá»•ng sá»‘ bá»™ tá»«">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-value">{{ stats.total_sets }}</div>
            <div class="stat-label">Bá»™ tá»«</div>
          </div>
          <div class="card stat-card" aria-label="Tá»•ng sá»‘ tá»« vá»±ng">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-value">{{ stats.total_words }}</div>
            <div class="stat-label">Tá»« vá»±ng</div>
          </div>
          <div class="card stat-card" aria-label="Tá»« Ä‘Ã£ há»c">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-value">{{ stats.learned_words }}</div>
            <div class="stat-label">ÄÃ£ há»c</div>
          </div>
          <div class="card stat-card" aria-label="Tá»« cáº§n Ã´n hÃ´m nay">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-value">{{ stats.due_today }}</div>
            <div class="stat-label">Cáº§n Ã´n</div>
          </div>
          <div class="card stat-card" aria-label="Äá»™ chÃ­nh xÃ¡c">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-value">{{ stats.accuracy }}%</div>
            <div class="stat-label">ChÃ­nh xÃ¡c</div>
          </div>
          <div class="card stat-card" aria-label="Chuá»—i ngÃ y há»c">
            <div class="stat-icon">ğŸ”¥</div>
            <div class="stat-value">{{ stats.streak }}</div>
            <div class="stat-label">Streak</div>
          </div>
        </div>
        <section class="card" aria-labelledby="recent-heading">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
            <h2 id="recent-heading" style="margin:0;">ğŸ“– Bá»™ tá»« gáº§n Ä‘Ã¢y</h2>
            <a href="/sets" class="btn-ghost" style="white-space:nowrap;">Xem táº¥t cáº£ â†’</a>
          </div>
          {% if recent_sets %}
          <div class="recent-sets-grid" style="margin-top:1rem;">
            {% for s in recent_sets %}
            <div class="card set-item" style="padding:1rem;">
              <h3>{{ s.name }}</h3>
              <p class="muted" style="margin:.25rem 0 .5rem;">{{ s.description or 'KhÃ´ng cÃ³ mÃ´ táº£' }}</p>
              <div class="muted" style="font-size:.75rem;letter-spacing:.5px;">{{ s.language_from }} â†’ {{ s.language_to }}</div>
              <div class="actions">
                <a href="/sets/{{ s.id }}" class="btn-ghost">ğŸ“‹ Chi tiáº¿t</a>
                <a href="/study/{{ s.id }}?mode=select" class="btn" style="flex:1;min-width:120px;">ğŸ¯ Há»c</a>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="empty-state" style="text-align:center;padding:1.25rem .75rem;">
            <div style="font-size:2rem;">ğŸ“š</div>
            <p style="margin:.5rem 0 0;">ChÆ°a cÃ³ bá»™ tá»« nÃ o. <a href="/" style="font-weight:600;">Táº£i lÃªn file</a> Ä‘á»ƒ báº¯t Ä‘áº§u!</p>
          </div>
          {% endif %}
        </section>
      </section>
      <aside>
        <div class="card" aria-label="Gá»£i Ã½ tiáº¿p theo" style="margin-bottom:1rem;">
          <h2 style="margin-top:0;">ğŸš€ Tiáº¿n bá»™</h2>
          <p class="muted" style="font-size:.9rem;">Táº­p trung Ã´n cÃ¡c tá»« Ä‘áº¿n háº¡n Ä‘á»ƒ duy trÃ¬ streak vÃ  cáº£i thiá»‡n Ä‘á»™ chÃ­nh xÃ¡c.</p>
          <ul style="list-style:none;padding:0;margin:0;display:grid;gap:.5rem;font-size:.85rem;">
            <li>ğŸ•’ Äáº¿n háº¡n hÃ´m nay: <strong>{{ stats.due_today }}</strong></li>
            <li>ğŸ¯ ÄÃ£ há»c: <strong>{{ stats.learned_words }}</strong> / {{ stats.total_words }}</li>
            <li>ğŸ”¥ Streak: <strong>{{ stats.streak }}</strong> ngÃ y</li>
            <li>ğŸ“ ChÃ­nh xÃ¡c: <strong>{{ stats.accuracy }}%</strong></li>
          </ul>
          <div style="margin-top:1rem;display:flex;gap:.5rem;flex-wrap:wrap;">
            {% if recent_sets %}
            <a href="/study/{{ recent_sets[0].id }}?mode=select" class="btn">ğŸ´ Ã”n ngay</a>
            {% else %}
            <a href="#" class="btn" style="pointer-events:none;opacity:.4;">ğŸ´ Ã”n ngay</a>
            {% endif %}
            <a href="/" class="btn-ghost">ğŸ“¤ ThÃªm bá»™ má»›i</a>
          </div>
        </div>
        <div class="card" aria-label="Máº¹o" style="font-size:.85rem;">
          <h2 style="margin-top:0;">ğŸ’¡ Máº¹o</h2>
          <ul style="padding-left:1rem;margin:.25rem 0;">
            <li>Ã”n tá»« Ä‘Ãºng lá»‹ch Ä‘á»ƒ tá»‘i Æ°u hoÃ¡ SM-2.</li>
            <li>DÃ¹ng cháº¿ Ä‘á»™ Tráº¯c nghiá»‡m Ä‘á»ƒ kiá»ƒm tra nhanh.</li>
            <li>ThÃªm vÃ­ dá»¥ giÃºp ghi nhá»› ngá»¯ cáº£nh.</li>
          </ul>
        </div>
      </aside>
    </div>
  </main>
  <script>
    (function(){
      const stored = localStorage.getItem('theme');
      if(stored){ document.documentElement.setAttribute('data-theme', stored); }
      else { document.documentElement.setAttribute('data-theme', window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'); }
    })();
    function toggleTheme(){
      const cur = document.documentElement.getAttribute('data-theme');
      const next = cur === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    }
  </script>
</body>
</html>
            </div>
